<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>XOR &amp; XNOR Gates — Boolean Algebra</title>
<style>
  *{margin:0;padding:0;box-sizing:border-box}
  body{background:#0d1117;color:#e6edf3;font-family:'Segoe UI',system-ui,sans-serif;
    display:flex;flex-direction:column;align-items:center;min-height:100vh;padding:18px}
  h1{font-size:1.5em;color:#e0e0ff}
  .subtitle{color:#7d8590;margin-bottom:10px;font-size:.92em;text-align:center;max-width:820px}

  .tabs{display:flex;gap:6px;margin:10px 0;flex-wrap:wrap;justify-content:center}
  .tab{padding:8px 18px;border-radius:8px;cursor:pointer;font-size:.86em;
    background:#161b22;border:1px solid #30363d;color:#8b949e;transition:.2s}
  .tab:hover{border-color:#58a6ff;color:#e6edf3}
  .tab.active{background:#1f6feb;border-color:#1f6feb;color:white;font-weight:bold}

  .main{max-width:1100px;width:100%;margin-top:10px}
  .row{display:flex;flex-wrap:wrap;gap:14px;justify-content:center;margin-bottom:14px}
  .panel{background:#161b22;border-radius:12px;padding:16px;border:1px solid #30363d;flex:1;min-width:300px}
  .panel h2{font-size:.95em;color:#8b949e;margin-bottom:10px;text-align:center}

  .theorem-box{background:#0d1117;border:1px solid #30363d;border-radius:10px;
    padding:14px 20px;text-align:center;margin-bottom:14px;max-width:900px;width:100%}
  .theorem-box .label{font-size:.8em;color:#8b949e;margin-bottom:6px}
  .expr{font-size:1.15em;font-family:'Courier New',monospace;letter-spacing:.5px;margin:4px 0}
  .expr .term{color:#3fb950}
  .expr .op{color:#8b949e}
  .expr .eq{color:#d2a8ff}
  .expr .sym{color:#f0883e;font-size:1.2em}

  /* Truth table */
  .tt-wrap{overflow-x:auto}
  .tt{border-collapse:collapse;width:100%;font-size:.85em;font-family:'Courier New',monospace}
  .tt th{background:#21262d;color:#8b949e;padding:6px 10px;border:1px solid #30363d;font-size:.78em;white-space:nowrap}
  .tt td{padding:6px 10px;border:1px solid #30363d;text-align:center}
  .tt td.v1{color:#3fb950;font-weight:bold}
  .tt td.v0{color:#484f58}
  .tt .sep{border-left:2px solid #58a6ff}

  /* Interactive inputs */
  .input-toggle{display:flex;gap:16px;justify-content:center;align-items:center;margin-bottom:14px;flex-wrap:wrap}
  .toggle-btn{width:64px;height:48px;border-radius:10px;font-size:1.4em;font-weight:bold;
    font-family:'Courier New',monospace;cursor:pointer;border:2px solid #30363d;transition:.2s;background:#21262d;color:#484f58}
  .toggle-btn.on{background:#1f6feb;color:white;border-color:#58a6ff;box-shadow:0 0 10px #1f6feb40}
  .toggle-btn:hover{transform:scale(1.05)}
  .input-label{font-size:.85em;color:#8b949e}
  .output-display{font-size:1.6em;font-weight:bold;font-family:'Courier New',monospace;
    padding:8px 24px;border-radius:10px;border:2px solid #30363d;min-width:60px;text-align:center;transition:.3s}
  .output-display.v1{color:#3fb950;background:#3fb95018;border-color:#3fb950}
  .output-display.v0{color:#484f58;background:#21262d}

  canvas{display:block;border-radius:10px}

  /* Identities */
  .id-list{font-family:'Courier New',monospace;font-size:.9em;line-height:2}
  .id-list .id{margin:2px 0}
  .id-list .lbl{color:#8b949e;font-size:.78em;font-family:'Segoe UI',system-ui,sans-serif}

  .info{max-width:800px;width:100%;margin-top:16px;padding:14px 18px;
    background:#161b22;border-radius:12px;border:1px solid #30363d;font-size:.85em;line-height:1.7;color:#8b949e}
  .info a{color:#58a6ff;text-decoration:none}
  .info a:hover{text-decoration:underline}

  .section{display:none}
  .section.active{display:block}
</style>
</head>
<body>
<h1>XOR &amp; XNOR Gates</h1>
<p class="subtitle">Exclusive-OR outputs 1 when inputs differ; Exclusive-NOR outputs 1 when inputs are the same.</p>

<div class="tabs">
  <div class="tab active" onclick="switchTab(0)">XOR</div>
  <div class="tab" onclick="switchTab(1)">XNOR</div>
</div>

<!-- ═══════ XOR ═══════ -->
<div class="section active" id="sec0">

<div class="theorem-box">
  <div class="label">XOR (Exclusive-OR)</div>
  <div class="expr">
    <span class="term">A</span> <span class="sym">⊕</span>
    <span class="term">B</span> <span class="eq">=</span>
    <span class="term">A'B</span> <span class="op">+</span>
    <span class="term">AB'</span>
  </div>
  <div style="font-size:.78em;color:#7d8590;margin-top:4px">Output is 1 when A and B are <span style="color:#f0883e">different</span></div>
</div>

<div class="main">
  <!-- Interactive toggle -->
  <div class="row">
    <div class="panel">
      <h2>Try It — Toggle Inputs</h2>
      <div class="input-toggle">
        <div style="text-align:center">
          <div class="input-label">A</div>
          <button class="toggle-btn" id="xorA" onclick="toggleInput(0,'A')">0</button>
        </div>
        <div style="font-size:1.3em;color:#f0883e;font-weight:bold">⊕</div>
        <div style="text-align:center">
          <div class="input-label">B</div>
          <button class="toggle-btn" id="xorB" onclick="toggleInput(0,'B')">0</button>
        </div>
        <div style="font-size:1.3em;color:#8b949e">=</div>
        <div style="text-align:center">
          <div class="input-label">A⊕B</div>
          <div class="output-display v0" id="xorOut">0</div>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="panel" style="max-width:360px">
      <h2>Truth Table</h2>
      <div class="tt-wrap">
        <table class="tt">
          <thead><tr><th>A</th><th>B</th><th class="sep">A⊕B</th></tr></thead>
          <tbody>
            <tr><td class="v0">0</td><td class="v0">0</td><td class="v0 sep">0</td></tr>
            <tr><td class="v0">0</td><td class="v1">1</td><td class="v1 sep">1</td></tr>
            <tr><td class="v1">1</td><td class="v0">0</td><td class="v1 sep">1</td></tr>
            <tr><td class="v1">1</td><td class="v1">1</td><td class="v0 sep">0</td></tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="panel" style="max-width:420px">
      <h2>Gate Diagram</h2>
      <canvas id="gateXOR" width="380" height="200"></canvas>
    </div>

    <div class="panel" style="max-width:300px">
      <h2>K-Map</h2>
      <canvas id="kmapXOR" width="260" height="200"></canvas>
    </div>
  </div>

  <div class="row">
    <div class="panel" style="max-width:480px">
      <h2>Equivalent Implementations</h2>
      <canvas id="equivXOR" width="440" height="300"></canvas>
    </div>

    <div class="panel" style="max-width:480px">
      <h2>XOR Identities</h2>
      <div class="id-list">
        <div class="id"><span style="color:#3fb950">A ⊕ 0 = A</span> <span class="lbl">&nbsp;— identity</span></div>
        <div class="id"><span style="color:#3fb950">A ⊕ 1 = A'</span> <span class="lbl">&nbsp;— complement</span></div>
        <div class="id"><span style="color:#3fb950">A ⊕ A = 0</span> <span class="lbl">&nbsp;— self-inverse</span></div>
        <div class="id"><span style="color:#3fb950">A ⊕ A' = 1</span> <span class="lbl">&nbsp;— complement pair</span></div>
        <div class="id"><span style="color:#3fb950">A ⊕ B = B ⊕ A</span> <span class="lbl">&nbsp;— commutative</span></div>
        <div class="id"><span style="color:#3fb950">(A⊕B)⊕C = A⊕(B⊕C)</span> <span class="lbl">&nbsp;— associative</span></div>
        <div class="id"><span style="color:#3fb950">A ⊕ B = A'B + AB'</span> <span class="lbl">&nbsp;— SOP definition</span></div>
        <div class="id"><span style="color:#3fb950">A ⊕ B = (A+B)(A'+B')</span> <span class="lbl">&nbsp;— POS form</span></div>
        <div class="id"><span style="color:#3fb950">(A⊕B)' = A⊙B</span> <span class="lbl">&nbsp;— complement is XNOR</span></div>
      </div>
    </div>
  </div>
</div>
</div>

<!-- ═══════ XNOR ═══════ -->
<div class="section" id="sec1">

<div class="theorem-box">
  <div class="label">XNOR (Exclusive-NOR)</div>
  <div class="expr">
    <span class="term">A</span> <span class="sym">⊙</span>
    <span class="term">B</span> <span class="eq">=</span>
    <span class="term">AB</span> <span class="op">+</span>
    <span class="term">A'B'</span>
  </div>
  <div style="font-size:.78em;color:#7d8590;margin-top:4px">Output is 1 when A and B are the <span style="color:#58a6ff">same</span> — also called equivalence gate</div>
</div>

<div class="main">
  <div class="row">
    <div class="panel">
      <h2>Try It — Toggle Inputs</h2>
      <div class="input-toggle">
        <div style="text-align:center">
          <div class="input-label">A</div>
          <button class="toggle-btn" id="xnorA" onclick="toggleInput(1,'A')">0</button>
        </div>
        <div style="font-size:1.3em;color:#58a6ff;font-weight:bold">⊙</div>
        <div style="text-align:center">
          <div class="input-label">B</div>
          <button class="toggle-btn" id="xnorB" onclick="toggleInput(1,'B')">0</button>
        </div>
        <div style="font-size:1.3em;color:#8b949e">=</div>
        <div style="text-align:center">
          <div class="input-label">A⊙B</div>
          <div class="output-display v1" id="xnorOut">1</div>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="panel" style="max-width:360px">
      <h2>Truth Table</h2>
      <div class="tt-wrap">
        <table class="tt">
          <thead><tr><th>A</th><th>B</th><th class="sep">A⊙B</th></tr></thead>
          <tbody>
            <tr><td class="v0">0</td><td class="v0">0</td><td class="v1 sep">1</td></tr>
            <tr><td class="v0">0</td><td class="v1">1</td><td class="v0 sep">0</td></tr>
            <tr><td class="v1">1</td><td class="v0">0</td><td class="v0 sep">0</td></tr>
            <tr><td class="v1">1</td><td class="v1">1</td><td class="v1 sep">1</td></tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="panel" style="max-width:420px">
      <h2>Gate Diagram</h2>
      <canvas id="gateXNOR" width="380" height="200"></canvas>
    </div>

    <div class="panel" style="max-width:300px">
      <h2>K-Map</h2>
      <canvas id="kmapXNOR" width="260" height="200"></canvas>
    </div>
  </div>

  <div class="row">
    <div class="panel" style="max-width:480px">
      <h2>Equivalent Implementations</h2>
      <canvas id="equivXNOR" width="440" height="300"></canvas>
    </div>

    <div class="panel" style="max-width:480px">
      <h2>XNOR Identities</h2>
      <div class="id-list">
        <div class="id"><span style="color:#58a6ff">A ⊙ 0 = A'</span> <span class="lbl">&nbsp;— complement</span></div>
        <div class="id"><span style="color:#58a6ff">A ⊙ 1 = A</span> <span class="lbl">&nbsp;— identity</span></div>
        <div class="id"><span style="color:#58a6ff">A ⊙ A = 1</span> <span class="lbl">&nbsp;— self-equivalence</span></div>
        <div class="id"><span style="color:#58a6ff">A ⊙ A' = 0</span> <span class="lbl">&nbsp;— complement pair</span></div>
        <div class="id"><span style="color:#58a6ff">A ⊙ B = B ⊙ A</span> <span class="lbl">&nbsp;— commutative</span></div>
        <div class="id"><span style="color:#58a6ff">A ⊙ B = AB + A'B'</span> <span class="lbl">&nbsp;— SOP definition</span></div>
        <div class="id"><span style="color:#58a6ff">A ⊙ B = (A'+B)(A+B')</span> <span class="lbl">&nbsp;— POS form</span></div>
        <div class="id"><span style="color:#58a6ff">A ⊙ B = (A⊕B)'</span> <span class="lbl">&nbsp;— complement of XOR</span></div>
      </div>
    </div>
  </div>
</div>
</div>

<div class="info">
  <strong>XOR (⊕):</strong> Outputs 1 when inputs differ. Used in adders, parity generators, and error detection.<br>
  <strong>XNOR (⊙):</strong> Outputs 1 when inputs are the same. Also called the <em>equivalence</em> gate — used in comparators.<br>
  <strong>Relationship:</strong> XNOR = NOT(XOR). They are complements of each other: A⊙B = (A⊕B)'.<br><br>
  <a href="index.html">&larr; All Demos</a> &middot;
  <a href="consensus.html">Consensus Theorem</a> &middot;
  <a href="boolean-theorems.html">Absorption &amp; Elimination</a> &middot;
  <a href="kmap.html">K-Map Simplifier</a>
</div>

<script>
// ── Tab switching ──
function switchTab(idx) {
  document.querySelectorAll('.tab').forEach((t, i) => t.classList.toggle('active', i === idx));
  document.querySelectorAll('.section').forEach((s, i) => s.classList.toggle('active', i === idx));
}

// ── Interactive toggles ──
const inputs = [[0, 0], [0, 0]]; // [xor, xnor] × [A, B]

function toggleInput(tab, inp) {
  const idx = inp === 'A' ? 0 : 1;
  inputs[tab][idx] ^= 1;
  const prefix = tab === 0 ? 'xor' : 'xnor';
  const btn = document.getElementById(prefix + inp);
  btn.textContent = inputs[tab][idx];
  btn.classList.toggle('on', inputs[tab][idx] === 1);
  updateOutput(tab);
}

function updateOutput(tab) {
  const A = inputs[tab][0], B = inputs[tab][1];
  const out = tab === 0 ? (A ^ B) : (A ^ B ^ 1);
  const prefix = tab === 0 ? 'xor' : 'xnor';
  const el = document.getElementById(prefix + 'Out');
  el.textContent = out;
  el.className = 'output-display v' + out;
}

// ── Drawing helpers ──
function drawWire(ctx, x1, y1, x2, y2, color) {
  ctx.strokeStyle = color || '#8b949e';
  ctx.lineWidth = 2;
  ctx.beginPath();
  ctx.moveTo(x1, y1);
  ctx.lineTo(x2, y2);
  ctx.stroke();
}

function drawLabel(ctx, text, x, y, color, size) {
  ctx.font = (size || 13) + 'px "Courier New", monospace';
  ctx.fillStyle = color || '#e6edf3';
  ctx.textAlign = 'center';
  ctx.textBaseline = 'middle';
  ctx.fillText(text, x, y);
}

function drawXORShape(ctx, x, y, w, h, color) {
  // XOR gate shape: curved body with double back curve
  ctx.strokeStyle = color || '#f0883e';
  ctx.lineWidth = 2.5;
  ctx.beginPath();
  // Back curve (inner)
  ctx.moveTo(x, y - h / 2);
  ctx.quadraticCurveTo(x + w * 0.25, y, x, y + h / 2);
  ctx.stroke();
  // Main body
  ctx.beginPath();
  ctx.moveTo(x + 8, y - h / 2);
  ctx.quadraticCurveTo(x + w * 0.3, y, x + 8, y + h / 2);
  // Bottom curve to tip
  ctx.quadraticCurveTo(x + w * 0.6, y + h / 2, x + w, y);
  // Top curve back
  ctx.moveTo(x + 8, y - h / 2);
  ctx.quadraticCurveTo(x + w * 0.6, y - h / 2, x + w, y);
  ctx.stroke();
}

function drawORShape(ctx, x, y, w, h, color) {
  ctx.strokeStyle = color || '#58a6ff';
  ctx.lineWidth = 2.5;
  ctx.beginPath();
  ctx.moveTo(x, y - h / 2);
  ctx.quadraticCurveTo(x + w * 0.25, y, x, y + h / 2);
  ctx.quadraticCurveTo(x + w * 0.6, y + h / 2, x + w, y);
  ctx.moveTo(x, y - h / 2);
  ctx.quadraticCurveTo(x + w * 0.6, y - h / 2, x + w, y);
  ctx.stroke();
}

function drawANDShape(ctx, x, y, w, h, color) {
  ctx.strokeStyle = color || '#3fb950';
  ctx.lineWidth = 2.5;
  ctx.beginPath();
  ctx.moveTo(x + w / 2, y - h / 2);
  ctx.lineTo(x, y - h / 2);
  ctx.lineTo(x, y + h / 2);
  ctx.lineTo(x + w / 2, y + h / 2);
  ctx.arc(x + w / 2, y, h / 2, Math.PI / 2, -Math.PI / 2, true);
  ctx.stroke();
}

function drawNOTBubble(ctx, x, y, color) {
  ctx.strokeStyle = color || '#e6edf3';
  ctx.lineWidth = 2;
  ctx.beginPath();
  ctx.arc(x, y, 5, 0, Math.PI * 2);
  ctx.stroke();
}

function drawNOTTriangle(ctx, x, y, w, h, color) {
  ctx.strokeStyle = color || '#d2a8ff';
  ctx.lineWidth = 2;
  ctx.beginPath();
  ctx.moveTo(x, y - h / 2);
  ctx.lineTo(x, y + h / 2);
  ctx.lineTo(x + w, y);
  ctx.closePath();
  ctx.stroke();
}

// ── XOR Gate Diagram ──
function drawGateXOR() {
  const c = document.getElementById('gateXOR');
  const ctx = c.getContext('2d');
  ctx.clearRect(0, 0, c.width, c.height);

  const cx = 190, cy = 100, gw = 70, gh = 60;

  // Input wires
  drawWire(ctx, 40, cy - 22, cx + 12, cy - 22, '#8b949e');
  drawWire(ctx, 40, cy + 22, cx + 12, cy + 22, '#8b949e');
  // Output wire
  drawWire(ctx, cx + gw, cy, c.width - 40, cy, '#3fb950');

  // Gate
  drawXORShape(ctx, cx, cy, gw, gh, '#f0883e');

  // Labels
  drawLabel(ctx, 'A', 30, cy - 22, '#58a6ff', 14);
  drawLabel(ctx, 'B', 30, cy + 22, '#58a6ff', 14);
  drawLabel(ctx, "A⊕B", c.width - 30, cy, '#3fb950', 14);

  // Symbol in gate
  drawLabel(ctx, '⊕', cx + gw / 2 + 4, cy - 38, '#f0883e', 16);
  drawLabel(ctx, 'XOR', cx + gw / 2 + 4, cy + 48, '#8b949e', 12);
}

// ── XNOR Gate Diagram ──
function drawGateXNOR() {
  const c = document.getElementById('gateXNOR');
  const ctx = c.getContext('2d');
  ctx.clearRect(0, 0, c.width, c.height);

  const cx = 190, cy = 100, gw = 70, gh = 60;

  drawWire(ctx, 40, cy - 22, cx + 12, cy - 22, '#8b949e');
  drawWire(ctx, 40, cy + 22, cx + 12, cy + 22, '#8b949e');
  drawWire(ctx, cx + gw + 10, cy, c.width - 40, cy, '#3fb950');

  drawXORShape(ctx, cx, cy, gw, gh, '#58a6ff');
  drawNOTBubble(ctx, cx + gw + 5, cy, '#58a6ff');

  drawLabel(ctx, 'A', 30, cy - 22, '#58a6ff', 14);
  drawLabel(ctx, 'B', 30, cy + 22, '#58a6ff', 14);
  drawLabel(ctx, "A⊙B", c.width - 30, cy, '#3fb950', 14);

  drawLabel(ctx, '⊙', cx + gw / 2 + 4, cy - 38, '#58a6ff', 16);
  drawLabel(ctx, 'XNOR', cx + gw / 2 + 4, cy + 48, '#8b949e', 12);
}

// ── K-Maps ──
function drawKmap(canvasId, vals, title, groupColor) {
  const c = document.getElementById(canvasId);
  const ctx = c.getContext('2d');
  const W = c.width, H = c.height;
  ctx.clearRect(0, 0, W, H);

  const cellW = 64, cellH = 52;
  const sx = 70, sy = 56;

  ctx.font = 'bold 13px "Courier New", monospace';
  ctx.fillStyle = '#bc8cff'; ctx.textAlign = 'center';
  ctx.fillText('B', sx + cellW, sy - 32);
  ctx.save();
  ctx.translate(sx - 30, sy + cellH);
  ctx.rotate(-Math.PI / 2);
  ctx.fillText('A', 0, 0);
  ctx.restore();

  ctx.font = '12px "Courier New", monospace';
  ctx.fillStyle = '#8b949e';
  ctx.fillText('0', sx + cellW / 2, sy - 8);
  ctx.fillText('1', sx + cellW + cellW / 2, sy - 8);
  ctx.fillText('0', sx - 14, sy + cellH / 2 + 4);
  ctx.fillText('1', sx - 14, sy + cellH + cellH / 2 + 4);

  for (let r = 0; r < 2; r++) {
    for (let c2 = 0; c2 < 2; c2++) {
      const x = sx + c2 * cellW, y = sy + r * cellH;
      const v = vals[r][c2];
      ctx.fillStyle = v ? '#3fb95018' : '#0d1117';
      ctx.fillRect(x, y, cellW, cellH);
      ctx.strokeStyle = '#30363d'; ctx.lineWidth = 1;
      ctx.strokeRect(x, y, cellW, cellH);
      ctx.font = 'bold 18px "Courier New", monospace';
      ctx.fillStyle = v ? '#3fb950' : '#484f58';
      ctx.textAlign = 'center'; ctx.textBaseline = 'middle';
      ctx.fillText(v, x + cellW / 2, y + cellH / 2);

      const m = r * 2 + c2;
      ctx.font = '9px sans-serif'; ctx.fillStyle = '#484f58';
      ctx.textAlign = 'right'; ctx.textBaseline = 'bottom';
      ctx.fillText('m' + m, x + cellW - 3, y + cellH - 2);
    }
  }

  // Note: XOR/XNOR 1s are on diagonals — no adjacent grouping possible
  ctx.font = '11px sans-serif'; ctx.fillStyle = '#7d8590';
  ctx.textAlign = 'center'; ctx.textBaseline = 'top';
  ctx.fillText(title, W / 2, sy + cellH * 2 + 12);
}

// ── Equivalent Implementations ──
function drawEquivXOR() {
  const c = document.getElementById('equivXOR');
  const ctx = c.getContext('2d');
  ctx.clearRect(0, 0, c.width, c.height);

  // Title: A⊕B = A'B + AB'
  ctx.font = 'bold 13px sans-serif';
  ctx.fillStyle = '#8b949e'; ctx.textAlign = 'center';
  ctx.fillText("Implementation: A'B + AB'  (using AND, OR, NOT)", c.width / 2, 20);

  // NOT gates for A' and B'
  const ly = 70; // top path y
  const ly2 = 170; // bottom path y
  const ory = 120; // OR gate y

  // Input lines
  drawLabel(ctx, 'A', 15, 90, '#58a6ff', 13);
  drawLabel(ctx, 'B', 15, 150, '#58a6ff', 13);

  // A line
  drawWire(ctx, 30, 90, 60, 90);
  // Branch A up to NOT
  drawWire(ctx, 60, 90, 60, ly);
  drawWire(ctx, 60, ly, 80, ly);
  // NOT A
  drawNOTTriangle(ctx, 80, ly, 20, 20, '#d2a8ff');
  drawNOTBubble(ctx, 105, ly, '#d2a8ff');
  drawLabel(ctx, "A'", 120, ly - 12, '#d2a8ff', 11);
  // A' wire to AND1
  drawWire(ctx, 110, ly, 160, ly);

  // B line branch to AND1
  drawWire(ctx, 30, 150, 50, 150);
  drawWire(ctx, 50, 150, 50, ly + 20);
  drawWire(ctx, 50, ly + 20, 160, ly + 20);

  // AND1: A'B
  drawANDShape(ctx, 160, ly + 10, 40, 36, '#3fb950');
  drawLabel(ctx, "A'B", 205, ly - 8, '#3fb950', 11);
  drawWire(ctx, 200, ly + 10, 280, ly + 10);
  // Wire down to OR
  drawWire(ctx, 280, ly + 10, 280, ory - 14);

  // A line branch down to AND2
  drawWire(ctx, 60, 90, 60, ly2 - 10);
  drawWire(ctx, 60, ly2 - 10, 160, ly2 - 10);

  // B line
  drawWire(ctx, 50, 150, 50, ly2 + 10);
  // Branch B to NOT
  drawWire(ctx, 50, ly2 + 10, 80, ly2 + 10);
  drawNOTTriangle(ctx, 80, ly2 + 10, 20, 20, '#d2a8ff');
  drawNOTBubble(ctx, 105, ly2 + 10, '#d2a8ff');
  drawLabel(ctx, "B'", 120, ly2 + 24, '#d2a8ff', 11);
  drawWire(ctx, 110, ly2 + 10, 160, ly2 + 10);

  // AND2: AB'
  drawANDShape(ctx, 160, ly2, 40, 36, '#3fb950');
  drawLabel(ctx, "AB'", 205, ly2 + 24, '#3fb950', 11);
  drawWire(ctx, 200, ly2, 280, ly2);
  drawWire(ctx, 280, ly2, 280, ory + 14);

  // OR gate
  drawORShape(ctx, 270, ory, 50, 40, '#f0883e');
  drawWire(ctx, 320, ory, 380, ory, '#3fb950');
  drawLabel(ctx, "A⊕B", 400, ory, '#3fb950', 13);

  // Gate count
  ctx.font = '11px sans-serif'; ctx.fillStyle = '#7d8590'; ctx.textAlign = 'center';
  ctx.fillText('2 NOT + 2 AND + 1 OR  =  5 gates', c.width / 2, c.height - 15);
}

function drawEquivXNOR() {
  const c = document.getElementById('equivXNOR');
  const ctx = c.getContext('2d');
  ctx.clearRect(0, 0, c.width, c.height);

  ctx.font = 'bold 13px sans-serif';
  ctx.fillStyle = '#8b949e'; ctx.textAlign = 'center';
  ctx.fillText("Implementation: AB + A'B'  (using AND, OR, NOT)", c.width / 2, 20);

  const ly = 70, ly2 = 170, ory = 120;

  drawLabel(ctx, 'A', 15, 90, '#58a6ff', 13);
  drawLabel(ctx, 'B', 15, 150, '#58a6ff', 13);

  // A and B lines
  drawWire(ctx, 30, 90, 60, 90);
  drawWire(ctx, 30, 150, 50, 150);

  // Top AND: AB
  drawWire(ctx, 60, 90, 60, ly - 10);
  drawWire(ctx, 60, ly - 10, 160, ly - 10);
  drawWire(ctx, 50, 150, 50, ly + 10);
  drawWire(ctx, 50, ly + 10, 160, ly + 10);
  drawANDShape(ctx, 160, ly, 40, 36, '#3fb950');
  drawLabel(ctx, "AB", 205, ly - 12, '#3fb950', 11);
  drawWire(ctx, 200, ly, 280, ly);
  drawWire(ctx, 280, ly, 280, ory - 14);

  // Bottom AND: A'B'
  // NOT A
  drawWire(ctx, 60, 90, 60, ly2 - 10);
  drawWire(ctx, 60, ly2 - 10, 80, ly2 - 10);
  drawNOTTriangle(ctx, 80, ly2 - 10, 20, 20, '#d2a8ff');
  drawNOTBubble(ctx, 105, ly2 - 10, '#d2a8ff');
  drawLabel(ctx, "A'", 120, ly2 - 22, '#d2a8ff', 11);
  drawWire(ctx, 110, ly2 - 10, 160, ly2 - 10);

  // NOT B
  drawWire(ctx, 50, 150, 50, ly2 + 10);
  drawWire(ctx, 50, ly2 + 10, 80, ly2 + 10);
  drawNOTTriangle(ctx, 80, ly2 + 10, 20, 20, '#d2a8ff');
  drawNOTBubble(ctx, 105, ly2 + 10, '#d2a8ff');
  drawLabel(ctx, "B'", 120, ly2 + 24, '#d2a8ff', 11);
  drawWire(ctx, 110, ly2 + 10, 160, ly2 + 10);

  drawANDShape(ctx, 160, ly2, 40, 36, '#3fb950');
  drawLabel(ctx, "A'B'", 210, ly2 + 24, '#3fb950', 11);
  drawWire(ctx, 200, ly2, 280, ly2);
  drawWire(ctx, 280, ly2, 280, ory + 14);

  // OR gate
  drawORShape(ctx, 270, ory, 50, 40, '#f0883e');
  drawWire(ctx, 320, ory, 380, ory, '#3fb950');
  drawLabel(ctx, "A⊙B", 400, ory, '#3fb950', 13);

  ctx.font = '11px sans-serif'; ctx.fillStyle = '#7d8590'; ctx.textAlign = 'center';
  ctx.fillText('2 NOT + 2 AND + 1 OR  =  5 gates', c.width / 2, c.height - 15);
}

// ── Init ──
drawGateXOR();
drawGateXNOR();
drawKmap('kmapXOR', [[0,1],[1,0]], "Diagonal 1s — can't group, need A'B + AB'");
drawKmap('kmapXNOR', [[1,0],[0,1]], "Diagonal 1s — can't group, need AB + A'B'");
drawEquivXOR();
drawEquivXNOR();
</script>
</body>
</html>
